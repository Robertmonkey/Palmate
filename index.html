    body.kid-mode .pal-card__art {
      width: 130px;
      height: 130px;
      border-radius: 26px;
    }
    body.kid-mode .pal-card__art img {
      width: 100%;
      height: 100%;
    body.kid-mode .pal-card__type {
      font-size: 0.9rem;
      padding: 8px 14px;
    }
    body.kid-mode .pal-card .catch-btn {
      font-size: 0.95rem;
      padding: 12px 18px;
    }
    .pal-card,
    .item-card {
      display: flex;
      flex-direction: column;
      gap: 12px;
      padding: 18px;
      border-radius: 20px;
      background: linear-gradient(160deg, rgba(13, 27, 42, 0.92), rgba(18, 36, 58, 0.86));
      border: 1px solid rgba(148, 210, 189, 0.18);
      box-shadow: 0 20px 48px rgba(2, 10, 22, 0.55);
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease, background 0.2s ease;
      cursor: pointer;
      overflow: hidden;
      min-height: 100%;
    }
    .pal-card::before,
    .item-card::before {
      content: '';
      position: absolute;
      inset: 1px;
      border-radius: inherit;
      background: linear-gradient(135deg, rgba(148, 210, 189, 0.18), rgba(148, 210, 189, 0));
      opacity: 0.5;
      pointer-events: none;
      transition: opacity 0.25s ease;
    }
    .pal-card {
      text-align: left;
      backdrop-filter: saturate(120%) blur(3px);
    }
    .item-card {
      text-align: center;
      align-items: center;
      backdrop-filter: saturate(110%) blur(2px);
    .pal-card:hover,
    .item-card:hover {
      border-color: rgba(148, 210, 189, 0.45);
      box-shadow: 0 28px 56px rgba(2, 10, 22, 0.6);
      background: linear-gradient(160deg, rgba(16, 34, 52, 0.95), rgba(22, 42, 64, 0.9));
      z-index: 1;
    }
    .pal-card:hover::before,
    .item-card:hover::before {
      opacity: 0.85;
    }
    .pal-card__top {
      display: flex;
      gap: 16px;
      align-items: stretch;
    }
    .pal-card__art {
      position: relative;
      width: 110px;
      height: 110px;
      flex-shrink: 0;
      border-radius: 22px;
      background: linear-gradient(145deg, rgba(8, 20, 34, 0.85), rgba(14, 28, 46, 0.7));
      box-shadow: inset 0 0 0 1px rgba(224, 225, 221, 0.12), 0 16px 28px rgba(2, 10, 22, 0.55);
      display: grid;
      place-items: center;
      overflow: hidden;
    }
    .pal-card__art::after {
      content: '';
      position: absolute;
      inset: -40% -40% auto auto;
      width: 140px;
      height: 140px;
      background: radial-gradient(circle at center, rgba(148, 210, 189, 0.18), transparent 70%);
      opacity: 0.75;
      pointer-events: none;
    }
    .pal-card__art img {
      width: 92%;
      height: 92%;
      filter: drop-shadow(0 10px 18px rgba(0, 0, 0, 0.45));
    }
    .pal-card__details {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 10px;
      min-width: 0;
    }
    .pal-card__name-row {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 12px;
    }
    .pal-card__name-row .name {
      margin: 0;
      font-size: 1.15rem;
      font-weight: 700;
      letter-spacing: 0.02em;
      color: var(--text);
      word-break: break-word;
    }
    .pal-card__name-row .rarity {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 4px;
      font-size: 0.8rem;
      color: rgba(224, 225, 221, 0.75);
      white-space: nowrap;
    }
    .pal-card .rarity .stars {
      display: inline-flex;
      gap: 3px;
      color: #E4B914;
    }
    .pal-card__name-row .rarity .stars {
      justify-content: flex-end;
    }
    .pal-card .rarity .stars:empty,
    .pal-card .rarity .label:empty {
      display: none;
    }
    .pal-card .rarity .label {
      color: var(--accent);
      font-weight: 700;
    }
    .pal-card--profile .rarity .label {
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }
    .pal-card:not(.pal-card--profile) .rarity .label {
      text-transform: capitalize;
    }
    .pal-card__types {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .pal-card__type {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(12, 24, 40, 0.6);
      border: 1px solid rgba(148, 210, 189, 0.25);
      box-shadow: 0 10px 20px rgba(2, 10, 22, 0.45);
      font-size: 0.78rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: rgba(224, 225, 221, 0.82);
      white-space: nowrap;
      line-height: 1.1;
    }
    .pal-card__type span {
      display: inline-block;
    }
    .pal-card__type img {
      width: 20px;
      height: 20px;
      object-fit: contain;
    }
    .pal-card__details .work {
      margin-top: 2px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: flex-start;
    }
    .pal-card__footer {
      margin-top: auto;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-top: 6px;
    }
    .pal-card__footer .catch-btn {
      width: 100%;
    }
    .pal-card img,
    .item-card img {
      object-fit: contain;
    }
    @media (max-width: 520px) {
      .pal-card--profile .pal-card__top {
        flex-direction: column;
        align-items: center;
        text-align: center;
      }
      .pal-card--profile .pal-card__details {
        align-items: center;
      }
      .pal-card--profile .pal-card__name-row {
        flex-direction: column;
        align-items: center;
      }
      .pal-card--profile .pal-card__name-row .rarity {
        align-items: center;
      }
      .pal-card--profile .pal-card__details .work {
        justify-content: center;
      }
      .pal-card--profile .pal-card__footer {
        justify-content: center;
      }
    .pal-card .name,
    .item-card .name {
      font-weight: 700;
      gap: 6px;
      font-size: 0.82rem;
    .pal-card:not(.pal-card--profile) .rarity {
      gap: 6px;
      font-size: 0.85rem;
      background: linear-gradient(135deg, rgba(42, 157, 143, 0.9), rgba(75, 180, 162, 0.85));
      padding: 10px 16px;
      border-radius: 14px;
      font-size: 0.85rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      box-shadow: 0 12px 26px rgba(42, 157, 143, 0.35);
      transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
    }
    .pal-card .catch-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 32px rgba(42, 157, 143, 0.45);
      background: linear-gradient(135deg, rgba(119, 141, 169, 0.95), rgba(163, 177, 198, 0.85));
      box-shadow: 0 12px 26px rgba(119, 141, 169, 0.35);
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 18px;
      max-height: clamp(320px, 60vh, 520px);
      padding: 16px;
      border-radius: 20px;
      background: rgba(9, 19, 30, 0.7);
      border: 1px solid rgba(119, 141, 169, 0.28);
      box-shadow: inset 0 0 24px rgba(5, 15, 30, 0.5);
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      align-items: center;
      text-align: center;
      gap: 10px;
          card.className = 'pal-card pal-card--profile';
            return `<span class="pal-card__type" data-type='${safe}'><img src='${icon}' alt='${safe} icon'><span>${safe}</span></span>`;
          let typeMarkup = typeIcons;
          if (!typeMarkup) {
            const neutralIcon = iconMap['Neutral'] || '';
            const fallback = kidMode ? 'Unknown type' : 'Unknown type';
            typeMarkup = `<span class="pal-card__type" data-type='neutral'><img src='${neutralIcon}' alt='Neutral icon'><span>${escapeHTML(fallback)}</span></span>`;
          }
            <div class="pal-card__top">
              <div class="pal-card__art"><img alt=""></div>
              <div class="pal-card__details">
                <div class="pal-card__name-row">
                  <div class="name">${escapeHTML(pal.name)}</div>
                  <div class="rarity"><span class="stars">${starIcons}</span><span class="label">${escapeHTML(rarityLabel)}</span></div>
                </div>
                <div class="pal-card__types">${typeMarkup}</div>
                ${workBadges ? `<div class="work">${workBadges}</div>` : ''}
              </div>
            </div>
            <div class="pal-card__footer">
              <button class="catch-btn ${caught[pal.id] ? 'caught' : ''}">${caught[pal.id] ? 'Caught' : 'Catch'}</button>
            </div>
          const portrait = card.querySelector('.pal-card__art img');
